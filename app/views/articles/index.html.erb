<h1>Articles</h1><br>
<table width="100%">
<% @articles.each do |article| %>
  <tr>
    <td><%= link_to(article.title, article.url) %></td>
    <td><%= pluralize(article.votes.length, 'vote') %></td>
    <% if signed_in? %>
      <% if Vote.find_by_voteable_id_and_voteable_type_and_user_id(article.id, 'Article', current_user.id) %>
        <td>Upvoted</td>
      <% else %>
        <td><%= link_to('Upvote!', votes_path( :vote => {:voteable_id => article.id, :voteable_type => 'Article', :value => 1}), :method => :post) %></td>
      <% end %>
    <% end %>
    <td><%= link_to(pluralize(article.comments.length, 'comment'), article_path(article)) %></td>
    <% if signed_in? && current_user.admin? %>
      <td><%= link_to 'Flag Article', flagged_articles_path(:flagged_article => {:article_id => article.id}), :method => 'POST' %></td>
    <% end %>
  </tr>
<% end %>
</table>
<%= paginate @articles %>